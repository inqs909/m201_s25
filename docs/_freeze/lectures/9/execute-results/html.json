{
  "hash": "63d769e3668f42ef42afa0ea9a03bb81",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"The Bootstrap Method\"\nformat:\n  revealjs:\n    width: 1200\n    df-print: paged\n    scrollable: true\n    theme: [default, styles.scss]\n    navigation-mode: vertical\n    controls-layout: bottom-right\n    controls-tutorial: true\n    incremental: false \n    chalkboard:\n      src: notes/chalkboard_1a.json\n      storage: chalkboard_pres\n      theme: whiteboard\n      chalk-width: 4\nknitr:\n  opts_chunk: \n    echo: true\n    eval: true\n    message: false\n    code-fold: true\n    warnings: false\n    comment: \"#>\" \n    \nrevealjs-plugins:\n  - pointer\n  - verticator\n  \nfilters: \n  - reveal-header\n  - code-fullscreen\n  - reveal-auto-agenda\neditor: source\n---\n\n\n\n\n\n\n\n\n\n# Motivation\n\n## Motivation\n\nThe `bacteria` data set contians information on whether bacteria (`y`: y or n) is present after utilizing treatments (`ap`: **a**ctive or **p**lacebo).\n\n::: fragment\nWe are interesting in determine the proportion of having bacteria present is different for those taking an \"active\" or \"placebo\".\n:::\n\n## Comparing Proportions\n\nWe are interesting in determining if different groups see different proportions of a binary outcome.\n\nWe compute the proportions of observing the binary outcome in Group 1 and Group 2 and see if they are fundamentally different from each other.\n\n## 2 by 2 Cross Tabulations\n\n|         |           |           |\n|---------|-----------|-----------|\n| Groups  | Outcome 1 | Outcome 2 |\n| Group 1 | $p_{11}$  | $p_{21}$  |\n| Group 2 | $p_{12}$  | $p_{22}$  |\n\n\n::: fragment\nWe want to compare $p_{11}$ and $p_{12}$, to determine if the probability of outcome 1 are the same for both groups.\n\n:::\n\n## Test Statistic\n\nWe can use both $p_{11}$ and $p_{12}$ to determine if there is a fundamental difference.\n\n::: fragment\nHowever, it will be more beneficial to utilize one statistic to contruct the sampling distribution.\n:::\n\n::: fragment\n$$\nT =  \\hat p_{11} - \\hat p_{12}\n$$\n:::\n\n\n## Obtain Difference in R\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\nprops_df(DATA, GROUP, OUTCOME, VAL, diff = TRUE)\n```\n:::\n\n\n\n\n\n## Bacteria Example\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\nprops_df(bacteria, ap, y, \"y\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>    p1    p2 \n#> 0.750 0.875\n```\n\n\n:::\n:::\n\n\n\n\n\n## Bacteria Example\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\nprops_df(bacteria, ap, y, \"y\", TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 0.125\n```\n\n\n:::\n:::\n\n\n\n\n\n\n# Hypothesis Test\n\n## Hypothesis Test\n\nIs $T = .125$ of a difference large enough to indicate that an active drug is effective against the bacteria, or seeing this can be due to random chance.\n\n\n## Hypotheis Test\n\nWe will test the following hypothesis:\n\n$$\nH_0:\\ \\Delta =  p_1-p_2 = 0\n$$\n\n$$\nH_a:\\ \\Delta = p_1 - p_2 \\neq 0\n$$\n\n\n## Hypothesis Test\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nsim_stats <- replicate(1000, props(bacteria$ap, shuffle(bacteria$y), \"y\", T))\ntest_stat <- props(bacteria$ap, bacteria$y, \"y\", T)\nsum(abs(sim_stats) > abs(test_stat)) / 1001\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 0.01498501\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(data.frame(x = sim_stats), aes(x)) + \n  geom_density() +\n  geom_vline(xintercept = test_stat)\n```\n\n::: {.cell-output-display}\n![](9_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n## Hypothesis test \n\n\n::: incremental\n-  What if $\\Delta = - 0.5$?\n-  What if $\\Delta = 0.5$?\n-  What if $\\Delta = - 0.25$?\n-  What if $\\Delta = 0.25$?\n:::\n\n\n::: fragment\nCan we determine the plausible values of $\\Delta$ that may have produced our data set?\n:::\n\n\n# Confidence Intervals and Standard Error\n\n## Standard Error\n\nThe standard error is the standard deviation of a statistic.\n\n::: fragment\nIt can give us a margin of error for the statistic that we compute from the data.\n:::\n\n\n## Confidence Intervals\n\nConfidence Intervals give you a collection of values that may contain the true parameter of interest. \n\n::: fragment\nThe probability of capturing the true parameter is known as the confidence. This value can take any number between 0% to 100%\n:::\n\n## Confidence Interval\n\nThe confidence interval were displayed as: X%: (L, U)\n\n## Confidence Interval Intepretation\n\n\n\n## Confidence Intervals\n\nThese are a collection of $\\Delta$ values that will fail to reject the Null Hypothesis.\n\n::: fragment\nThe $\\Delta$ values that are not different from our current estimate $T$\n:::\n\n## Confidence Intervals\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\ndata.frame(x = rnorm(1000, 0.15, 0.05)) |> \n  ggplot(aes(x)) + \n  geom_density() +\n  geom_vline(xintercept = test_stat)\n```\n\n::: {.cell-output-display}\n![](9_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## Confidence Intervals\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\ndata.frame(x = rnorm(1000, 0.075, 0.05)) |> \n  ggplot(aes(x)) + \n  geom_density() +\n  geom_vline(xintercept = test_stat)\n```\n\n::: {.cell-output-display}\n![](9_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## How to construct the DGP centered around $\\Delta$?\n\n::: fragment\nBootstrapping Techniques\n:::\n\n::: fragment\nMathematical Models\n:::\n\n\n# Bootstrapping Techniques\n\n## Bootstrapping Techniques\n\nBootstrapping is a technique to determine which $\\Delta = p_1-p_2$ values, or any other statistic, will **not** be significantly different than $T$.\n\n::: fragment\nBootstrapping will simulate several fake data sets from the DGP of the data. Afterwards, each data set will produce a statistic to construct the sampling distribution.\n:::\n\n## Bootstrap Theory\n\n::: fragment\nThe data set was generated from a distribution called $f$.\n:::\n\n::: fragment\n$f$ is unknown, we will sample from $\\hat f$ generated from the data.\n:::\n\n::: fragment\nWhen $n \\rightarrow \\infty$, then $\\hat f\\rightarrow f$\n:::\n\n::: fragment\nSo long as $n$ is sufficiently large, the DGP of a statistic will be generated.\n:::\n\n## Bootstrapping Algorithm\n\n1.  Resample the data set using the `resample()` function\n2.  Compute the statistic of interest\n3.  Store the statistic\n4.  Repeat steps 1-3, until you a high number of simulations\n5.  Compute the confidence interval or standard errors from the bootstrap estimates\n\n## Bootstrapping in R\n\nThe `resample()` will create a new data set by sampling the old data set with replacement.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nboot1 <- resample(bacteria)\nprops_df(boot1, ap, y, yval = \"y\", TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 0.130291\n```\n\n\n:::\n:::\n\n\n\n\n\n## Repeat Process\n\nUse the `replicate()` function to repeat this process a high number of times.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nboot_samples <-replicate(1000, \n                         props_df(resample(bacteria), ap, y, yval = \"y\", TRUE))\n```\n:::\n\n\n\n\n\n## Bootstrap Distribution\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(data.frame(x = boot_samples), aes(x)) +\n  geom_histogram() + \n  geom_vline(xintercept = test_stat) \n```\n\n::: {.cell-output-display}\n![](9_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## Bootstrap-Based Standard Error\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nsd(boot_samples)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 0.05044719\n```\n\n\n:::\n:::\n\n\n\n\n## Interpreting the SE\n\n$$\n0.125 \\pm 0.05\n$$\n\n## 95% Confidence Interval\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(data.frame(x = boot_samples), aes(x)) +\n  geom_histogram(aes(fill = middle(x, .95))) + \n  geom_vline(xintercept = test_stat) \n```\n\n::: {.cell-output-display}\n![](9_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## 95% Confidence Interval\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nquantile(boot_samples, probs = c(0.025, 0.975))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>       2.5%      97.5% \n#> 0.02499504 0.22086102\n```\n\n\n:::\n:::\n\n\n\n\n\n\n## Interpretation\n\nWe are 95% confident that the true difference in proportion ($\\Delta$) is captured between the ranges (0.025, 0.224).\n\n",
    "supporting": [
      "9_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}